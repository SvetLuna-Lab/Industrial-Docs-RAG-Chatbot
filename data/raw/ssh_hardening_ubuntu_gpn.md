# Инструкция: базовое усиление безопасности SSH на сервере Ubuntu

Документ-черновик для внутреннего контура ИТ / OT.  
Цель: задать единый минимальный уровень безопасности для SSH-доступа к производственным серверам.

## 1. Область применения

Данный документ применяется к:

- bastion-серверам;
- серверам приложений;
- вспомогательным сервисам (логирование, мониторинг),

работающим под управлением Ubuntu Server 20.04 и выше.

## 2. Общие принципы

1. Доступ к SSH разрешается только по ключам.
2. Парольная аутентификация блокируется.
3. Доступ по SSH ограничивается по IP (VPN / jump-host).
4. Все действия фиксируются в журналах и централизованном лог-сервере.

## 3. Базовые требования к конфигурации SSH

Файл конфигурации: `/etc/ssh/sshd_config`.

Минимальный набор параметров:

- Отключить вход под root:

```text
PermitRootLogin no

```

- Запретить парольную аутентификацию:
 
```text
PasswordAuthentication no
ChallengeResponseAuthentication no

```

- Ограничить протокол:

```text
Protocol 2

```

- Включить логирование:

```text
LogLevel VERBOSE

```

- Ограничить список пользователей (пример):

```text
AllowUsers admin_ops deploy_ci

```


После изменения конфигурации необходимо выполнить перезапуск службы SSH стандартными средствами ОС (systemd).

## 4. Требования к SSH-ключам

1. Ключи должны генерироваться на рабочей станции пользователя.

2. Закрытый ключ хранится только на стороне пользователя, передача по открытым каналам запрещена.

3. Рекомендуемые типы ключей: ed25519 или rsa с длиной не менее 4096 бит.

4. Закрытый ключ должен быть защищён парольной фразой.


## 5. Ограничение доступа по сети

Сетевой доступ к порту SSH (обычно 22/tcp) должен:

- быть закрыт с внешних подсетей;

- открываться только для:

- VPN-шлюзов;

- jump-host серверов;

- доверенных административных подсетей.

Правила межсетевых экранов и систем контроля доступа описываются в отдельной сетевой политике.


## 6. Мониторинг и аудит

1. Логи SSH должны передаваться на централизованный лог-сервер.

2. Минимальный перечень контролируемых событий:

- успешные и неуспешные попытки входа;

- изменение конфигурации sshd;

- изменение списка пользователей.

3. Периодически (не реже 1 раза в квартал) проводится ревизия:

- активных ключей;

- учётных записей с доступом по SSH.


## 7. Ответственность

Администратор сервера отвечает за корректную настройку sshd и обновление пакетов безопасности.

Руководитель подразделения отвечает за формирование списка пользователей, которым доступ по SSH необходим для выполнения служебных задач.
   
